# amf-discovered-host-inventory

An Ansible Role to insert hosts that were scanned by the Ansible Migration Factory discovery playbook into a "Discovered Hosts" inventory.  The role utilizes lists of groups that are generated by application signatures to associate hosts with their identified applications in the "Discovered Hosts" inventory.  The role attaches the custom facts collected in the discovery playbook as host variables in the discovered_facts dictionary.

## Role Variables
| Variable Name | Required | Description| Default Value | Type |
| --- | :---: | --- | :---: | :---:|
|discovered_host_install_prereqs|yes|Should the role install any prerequisite modules (ansible-tower-cli)|False|boolean|
|discovered_host_inventory_name|yes|Name of the new inventory to create in Ansible Tower to list and categorize discovered hosts.|"Discovered Hosts"|string|
|discovered_host_inventory_description|yes|Description of the `discovered_host_inventory_name` in Ansible Tower.|"Inventory of hosts scanned by the Ansible Migration Factory Discovery playbook"|string|
|discovered_host_inventory_default_group|yes|Default group to insert discovered hosts into when they have not been identified by application signatures.|{name: "Unknown Application", desc: "Hosts running applications or services that we could not identify"}|dictionary|
|tower_client_node_name|yes|Name to create the host in the "Discovered Hosts" inventory as.  If you choose to set this to "{{ ansible_fqdn }}" you will need double the Ansible Tower subscriptions if the names do not match.|"{{ inventory_hostname }}" | string |
|tower_url|no|URL to the Ansible Tower server starting with 'https://'|TOWER_HOST from env or ""|string|
|tower_verify_ssl|no|Validate the Ansible Tower Server's SSL certificate|TOWER_VERIFY_SSL from env or False|boolean|
|tower_user|no|Ansible Tower user with access to create inventories|TOWER_USERNAME from env or ""|string|
|tower_pass|no|Password to the Ansible Tower user.|TOWER_PASSWORD from env or ""|string|
|tower_org|yes|Organization of the Ansible Tower, where the new discovery inventory will be created|""|string|

## Example Playbook
```yaml
- hosts: servers
  roles:
     - { role: username.rolename, x: 42 }
```

## License
[MIT](LICENSE)

## Author Information
[Andrew J. Huffman](mailto: ahuffman@redhat.com)
